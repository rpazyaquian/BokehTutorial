
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Basic Exercises &mdash; Bokeh Tutorial 0.4.1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/my-styles.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.0.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/bokeh_white_32.ico"/>
    <link rel="top" title="Bokeh Tutorial 0.4.1 documentation" href="index.html" />
    <link rel="next" title="Topical Exercises" href="topical.html" />
    <link rel="prev" title="Installation" href="installation.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">

    <div class="container">

      <div class="navbar-header">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="logo"> <img height="32" width="32" src="_static/bokeh-transparent.png" /></a>
        <a class="navbar-brand" href="index.html">Bokeh Tutorial</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.1</b></span>
      </div>
        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-s-included">What&#8217;s Included</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#what-s-not">What&#8217;s not</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#exercise-notes">Exercise Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installing">Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#note-for-windows-users">Note for Windows Users</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Basic Exercises</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#drawing-lines">Drawing Lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scattering-points">Scattering Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="#displaying-images">Displaying Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#styling-your-plots">Styling your plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hovering-above-the-data">Hovering above the Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="topical.html">Topical Exercises</a><ul>
<li class="toctree-l2"><a class="reference internal" href="topical.html#timeseries">Timeseries</a></li>
<li class="toctree-l2"><a class="reference internal" href="topical.html#histograms">Histograms</a></li>
<li class="toctree-l2"><a class="reference internal" href="topical.html#boxplots">Boxplots</a></li>
<li class="toctree-l2"><a class="reference internal" href="topical.html#heatmaps">Heatmaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="topical.html#bar-charts">Bar Charts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Exercises</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#les-miserables-co-occurrences">Les Miserables Co-occurrences</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#periodic-table-of-elements">Periodic Table of Elements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="more_info.html">More Information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="more_info.html#contact">Contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="more_info.html#thanks">Thanks</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Basic Exercises</a><ul>
<li><a class="reference internal" href="#drawing-lines">Drawing Lines</a></li>
<li><a class="reference internal" href="#scattering-points">Scattering Points</a></li>
<li><a class="reference internal" href="#displaying-images">Displaying Images</a></li>
<li><a class="reference internal" href="#styling-your-plots">Styling your plots</a></li>
<li><a class="reference internal" href="#hovering-above-the-data">Hovering above the Data</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="installation.html" title="Previous Chapter: Installation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Installation</span>
    </a>
  </li>
  <li>
    <a href="topical.html" title="Next Chapter: Topical Exercises"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Topical Exercise... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Basic Exercises</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#drawing-lines">Drawing Lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scattering-points">Scattering Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="#displaying-images">Displaying Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="#styling-your-plots">Styling your plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hovering-above-the-data">Hovering above the Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="topical.html">Topical Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="more_info.html">More Information</a></li>
</ul>

<div id="sourcelink">
  <a href="_sources/basic.txt"
     rel="nofollow">Source</a>
</div>
<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="basic-exercises">
<h1>Basic Exercises<a class="headerlink" href="#basic-exercises" title="Permalink to this headline">Â¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#drawing-lines" id="id1">Drawing Lines</a></li>
<li><a class="reference internal" href="#scattering-points" id="id2">Scattering Points</a></li>
<li><a class="reference internal" href="#displaying-images" id="id3">Displaying Images</a></li>
<li><a class="reference internal" href="#styling-your-plots" id="id4">Styling your plots</a></li>
<li><a class="reference internal" href="#hovering-above-the-data" id="id5">Hovering above the Data</a></li>
</ul>
</div>
<div class="section" id="drawing-lines">
<span id="line"></span><h2><a class="toc-backref" href="#id1">Drawing Lines</a><a class="headerlink" href="#drawing-lines" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li>exercise location: <strong>scripts/lines.py</strong></li>
</ul>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">bokeh.objects</span> <span class="kn">import</span> <span class="n">Range1d</span>

<span class="c"># Skip the first point because it can be troublesome</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>

<span class="c"># Compute the radial coordinates for some different spirals</span>
<span class="n">lituus</span> <span class="o">=</span> <span class="n">theta</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>          <span class="c"># lituus</span>
<span class="n">golden</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mf">0.306349</span><span class="o">*</span><span class="n">theta</span><span class="p">)</span> <span class="c"># golden</span>
<span class="n">arch</span>   <span class="o">=</span> <span class="n">theta</span>                  <span class="c"># Archimedean</span>
<span class="n">fermat</span> <span class="o">=</span> <span class="n">theta</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>           <span class="c"># Fermat&#39;s</span>

<span class="c"># Now compute the X and Y coordinates (polar mappers planned for Bokeh later)</span>
<span class="n">golden_x</span> <span class="o">=</span> <span class="n">golden</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">golden_y</span> <span class="o">=</span> <span class="n">golden</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">lituus_x</span> <span class="o">=</span> <span class="n">lituus</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">lituus_y</span> <span class="o">=</span> <span class="n">lituus</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">arch_x</span>   <span class="o">=</span> <span class="n">arch</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">arch_y</span>   <span class="o">=</span> <span class="n">arch</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">fermat_x</span> <span class="o">=</span> <span class="n">fermat</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="n">fermat_y</span> <span class="o">=</span> <span class="n">fermat</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

<span class="c"># output to static HTML file</span>
<span class="n">output_file</span><span class="p">(</span><span class="s">&quot;lines.html&quot;</span><span class="p">)</span>

<span class="c"># Plot the Archimedean spiral using the `line` renderer. Note how we set the</span>
<span class="c"># color, line thickness, title, and legend value.</span>
<span class="n">line</span><span class="p">(</span><span class="n">arch_x</span><span class="p">,</span> <span class="n">arch_y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="n">line_width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
     <span class="n">title</span><span class="o">=</span><span class="s">&quot;Archimean&quot;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s">&quot;Archimedean&quot;</span><span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE: reproduce the above plot for one of the other spirals</span>
</span>
<span class="c"># Let&#39;s try to put all lines on one plot for comparison. First we need to</span>
<span class="c"># turn on `hold` so that each renderer does not create a brand new plot</span>
<span class="n">hold</span><span class="p">()</span>

<span class="c"># Next we need to actually create a new figure, so that the following</span>
<span class="c"># renderers work on a new plot, and not the last one.</span>
<span class="n">figure</span><span class="p">()</span>

<span class="hll"><span class="c"># EXERCISE: add all four spirals to one plot, each with different line colors</span>
</span><span class="hll"><span class="c"># and legend values. NOTE: title only set on the first renderer.</span>
</span>
<span class="c"># OK, so that doesn&#39;t look so good because Bokeh tried to autoscale to</span>
<span class="c"># accomodate all the data. We can use the Range1d object to set the plot range</span>
<span class="c"># explicitly</span>

<span class="hll"><span class="c"># EXERCISE: create a new figure</span>
</span>
<span class="hll"><span class="c"># EXERCISE: add x_range and y_range parameters to the first `line`, to set the</span>
</span><span class="hll"><span class="c"># range to [-10, 10]. NOTE: Range1d are created like: Range1d(start=0, end-10)</span>
</span>
<span class="n">show</span><span class="p">()</span>      <span class="c"># show the plot</span>
</pre></div>
</td></tr></table></div>
<p>See the <a class="reference internal" href="lines_soln.html"><em>solution</em></a>.</p>
</div>
<div class="section" id="scattering-points">
<span id="scatter"></span><h2><a class="toc-backref" href="#id2">Scattering Points</a><a class="headerlink" href="#scattering-points" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li>exercise location: <strong>scripts/scatter.py</strong></li>
</ul>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">six.moves</span> <span class="kn">import</span> <span class="nb">zip</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">bokeh.objects</span> <span class="kn">import</span> <span class="n">Range1d</span>

<span class="c"># Recreate the Fermat spiral from the last exercise, with some different scalings</span>
<span class="c"># and number of turnings</span>
<span class="n">theta1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">256</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">500</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">theta1</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">x1</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">f1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta1</span><span class="p">)</span>
<span class="n">y1</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">f1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta1</span><span class="p">)</span>

<span class="n">theta2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">96</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">500</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">f2</span> <span class="o">=</span> <span class="n">theta2</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">f2</span><span class="o">*</span><span class="n">f2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta2</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="n">f2</span><span class="o">*</span><span class="n">f2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta2</span><span class="p">)</span>

<span class="n">theta3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">500</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">f3</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">theta3</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">x3</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">f3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta3</span><span class="p">)</span>
<span class="n">y3</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">f3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta3</span><span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE: output static HTML file</span>
</span>
<span class="c"># Create a set of tools to use</span>
<span class="n">TOOLS</span><span class="o">=</span><span class="s">&quot;pan,wheel_zoom,box_zoom,reset,previewsave&quot;</span>

<span class="hll"><span class="c"># EXERCISE: create two Range1d objects to reuse in the plots. Use the [-20, 20]</span>
</span><span class="hll"><span class="c"># for the bounds.</span>
</span>
<span class="hll"><span class="c"># EXERCISE: Plot all the sets of points on different plots. Use the ranges above</span>
</span><span class="hll"><span class="c"># for x_range and y_range. Set different colors as well. Try setting line_color</span>
</span><span class="hll"><span class="c"># and fill_color instead of just color. You can also set alpha, line_alpha, and</span>
</span><span class="hll"><span class="c"># fill_alpha if you like. Set tools to TOOLS on the first renderer. Change</span>
</span><span class="hll"><span class="c"># the value of the &#39;marker&#39; parameter, &quot;circle&quot;, &quot;square&quot;, &quot;triangle&quot;, etc. One</span>
</span><span class="hll"><span class="c"># example is given</span>
</span><span class="n">scatter</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="n">x_range</span><span class="o">=</span><span class="n">xr</span><span class="p">,</span> <span class="n">y_range</span><span class="o">=</span><span class="n">yr</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE: Try panning and zooming one of the plots with another one visible!</span>
</span><span class="hll"><span class="c"># Set the plot_width and plot_height to smaller if necessary</span>
</span>
<span class="hll"><span class="c"># EXERCISE: create a new figure</span>
</span>
<span class="c"># Lets plot 4000 circles, you can play around with this if you like</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">4000</span>

<span class="c"># Create a bunch of random points, radii and colors for plotting</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">radii</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&quot;#</span><span class="si">%02x%02x%02x</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mi">50</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mi">30</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="p">))</span>
<span class="p">]</span>

<span class="hll"><span class="c"># EXERCISE: use the `circle` renderer to scatter all the circles. Set the</span>
</span><span class="hll"><span class="c"># &#39;fill_color&#39; to the colors above, the &#39;line_color&#39; to None, and the &#39;radius&#39;</span>
</span><span class="hll"><span class="c"># to the radii. Also try setting the fill_alpha to something less than one.</span>
</span><span class="hll"><span class="c"># Use TOOLS from above to set a tools parameter.</span>
</span>
<span class="c"># NOTE: since we are passing &#39;radius&#39; as a parameter, the size of the circles</span>
<span class="c"># is computed in **data** space, not in pixels. If you&#39;d like to specify</span>
<span class="c"># radii in pixels, use: radius_units=&quot;screen&quot;</span>

<span class="n">show</span><span class="p">()</span>  <span class="c"># open a browser</span>
</pre></div>
</td></tr></table></div>
<p>See the <a class="reference internal" href="scatter_soln.html"><em>solution</em></a>.</p>
</div>
<div class="section" id="displaying-images">
<span id="images"></span><h2><a class="toc-backref" href="#id3">Displaying Images</a><a class="headerlink" href="#displaying-images" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li>exercise location: <strong>scripts/image.py</strong></li>
</ul>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">bokeh.objects</span> <span class="kn">import</span> <span class="n">Range1d</span>

<span class="c"># NOTE: if you do not have numba installed, comment out this import,</span>
<span class="c"># and the &#39;autojit&#39; lines below (the example will run more slowly).</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">autojit</span>

<span class="c"># These functions generate the Mandelbrot set image. Don&#39;t worry if</span>
<span class="c"># you are not familiar with them. The import thing is just to know</span>
<span class="c"># that they create a 2D array of numbers that we can colormap.</span>

<span class="nd">@autojit</span>
<span class="k">def</span> <span class="nf">mandel</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">max_iters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given the real and imaginary parts of a complex number,</span>
<span class="sd">    determine if it is a candidate for membership in the Mandelbrot</span>
<span class="sd">    set given a fixed number of iterations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="mf">0.0j</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iters</span><span class="p">):</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">z</span><span class="o">*</span><span class="n">z</span> <span class="o">+</span> <span class="n">c</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">real</span><span class="o">*</span><span class="n">z</span><span class="o">.</span><span class="n">real</span> <span class="o">+</span> <span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="o">*</span><span class="n">z</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">max_iters</span>

<span class="nd">@autojit</span>
<span class="k">def</span> <span class="nf">create_fractal</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_y</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">iters</span><span class="p">):</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">pixel_size_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_x</span> <span class="o">-</span> <span class="n">min_x</span><span class="p">)</span> <span class="o">/</span> <span class="n">width</span>
    <span class="n">pixel_size_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_y</span> <span class="o">-</span> <span class="n">min_y</span><span class="p">)</span> <span class="o">/</span> <span class="n">height</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="n">real</span> <span class="o">=</span> <span class="n">min_x</span> <span class="o">+</span> <span class="n">x</span> <span class="o">*</span> <span class="n">pixel_size_x</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
            <span class="n">imag</span> <span class="o">=</span> <span class="n">min_y</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">pixel_size_y</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">mandel</span><span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">,</span> <span class="n">iters</span><span class="p">)</span>
            <span class="n">image</span><span class="p">[</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>

<span class="c"># Define the bounding coordinates to generate the Mandelbrot image in. You</span>
<span class="c"># can play around with these.</span>
<span class="n">min_x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span>
<span class="n">max_x</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">min_y</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
<span class="n">max_y</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="c"># Use the functions above to create a scalar image (2D array of numbers)</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">1536</span><span class="p">),</span> <span class="n">dtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="n">create_fractal</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_y</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE: output static HTML file</span>
</span>
<span class="hll"><span class="c"># EXERCISE: Fill in the missing parameters to use the `image` renderer to</span>
</span><span class="hll"><span class="c"># display the Mandelbrot image &#39;img&#39; with the title &#39;Mandelbrot&#39;, colormapped</span>
</span><span class="hll"><span class="c"># with the palette &#39;Spectral-11&#39;, and a fixed range given by (min_x, max_x)</span>
</span><span class="hll"><span class="c"># and (min_y, max_y).</span>
</span><span class="hll"><span class="c">#</span>
</span><span class="hll"><span class="c"># NOTE: the `image` renderer can display many images at once, so it takes</span>
</span><span class="hll"><span class="c"># **lists** of images, coordinates, and palettes. Remember to supply sequences</span>
</span><span class="hll"><span class="c"># for these parameters, even if you are just supply one.</span>
</span><span class="n">image</span><span class="p">(</span><span class="n">image</span><span class="o">=</span>
      <span class="n">x</span><span class="o">=</span>                                          <span class="c"># lower left x coord</span>
      <span class="n">y</span><span class="o">=</span>                                          <span class="c"># lower left y coord</span>
      <span class="n">dw</span><span class="o">=</span>                                         <span class="c"># *data* width of image</span>
      <span class="n">dh</span><span class="o">=</span>                                         <span class="c"># *data* height of image</span>
      <span class="n">palette</span><span class="o">=</span>                                    <span class="c"># palette to colormap with</span>
      <span class="n">x_range</span> <span class="o">=</span> <span class="n">Range1d</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">min_x</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">max_x</span><span class="p">),</span>  <span class="c"># fix the X range</span>
      <span class="n">y_range</span> <span class="o">=</span> <span class="n">Range1d</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">min_y</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">max_x</span><span class="p">),</span>  <span class="c"># fix the Y range</span>
      <span class="n">title</span><span class="o">=</span>                                      <span class="c"># give the plot a title</span>
      <span class="n">tools</span><span class="o">=</span><span class="s">&quot;pan,wheel_zoom,box_zoom,reset&quot;</span><span class="p">,</span>      <span class="c"># add some tools</span>
      <span class="n">plot_width</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>                             <span class="c"># set a width for the plot</span>
      <span class="n">plot_height</span><span class="o">=</span><span class="mi">600</span>                             <span class="c"># and a height</span>
<span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE: create a new figure</span>
</span>
<span class="c"># We can also use the `image_rgba` renderer to display RGBA images that</span>
<span class="c"># we have colormapped ourselves.</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">N</span><span class="p">,</span><span class="n">N</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint32</span><span class="p">)</span>
<span class="n">view</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">view</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="n">N</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span>
        <span class="n">view</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">158</span>
        <span class="n">view</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">j</span><span class="o">/</span><span class="n">N</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span>
        <span class="n">view</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>

<span class="hll"><span class="c"># EXERCISE: use `image_rgba` to display the image above. Use the following</span>
</span><span class="hll"><span class="c"># cordinates: (x0,y0) = (0,0)  and (x1,y1) = (10,10). Remember to set the</span>
</span><span class="hll"><span class="c"># x_range and y_range explicitly as above.</span>
</span>
<span class="n">show</span><span class="p">()</span>      <span class="c"># show the plot</span>
</pre></div>
</td></tr></table></div>
<p>See the <a class="reference internal" href="image_soln.html"><em>solution</em></a>.</p>
</div>
<div class="section" id="styling-your-plots">
<span id="styling"></span><h2><a class="toc-backref" href="#id4">Styling your plots</a><a class="headerlink" href="#styling-your-plots" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li>exercise location: <strong>scripts/style.py</strong></li>
</ul>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">bokeh.objects</span> <span class="kn">import</span> <span class="n">Range1d</span>

<span class="c"># Define some categories</span>
<span class="n">categories</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&#39;ousia&#39;</span><span class="p">,</span> <span class="s">&#39;poson&#39;</span><span class="p">,</span> <span class="s">&#39;poion&#39;</span><span class="p">,</span> <span class="s">&#39;pros ti&#39;</span><span class="p">,</span> <span class="s">&#39;pou&#39;</span><span class="p">,</span>
    <span class="s">&#39;pote&#39;</span><span class="p">,</span> <span class="s">&#39;keisthai&#39;</span><span class="p">,</span> <span class="s">&#39;echein&#39;</span><span class="p">,</span> <span class="s">&#39;poiein&#39;</span><span class="p">,</span> <span class="s">&#39;paschein&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c"># Create data</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="n">cat</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span> <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">categories</span> <span class="p">}</span>

<span class="c"># Define a little function to stack series together to make polygons. Soon</span>
<span class="c"># this will be built into Bokeh.</span>
<span class="k">def</span> <span class="nf">stacked</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">categories</span><span class="p">):</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">last</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>
        <span class="nb">next</span> <span class="o">=</span> <span class="n">last</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="n">cat</span><span class="p">]</span>
        <span class="n">ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">last</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="nb">next</span><span class="p">)))</span>
        <span class="n">last</span> <span class="o">=</span> <span class="nb">next</span>
    <span class="k">return</span> <span class="n">ys</span>

<span class="c"># Get the y coordinates of the stacked data</span>
<span class="n">ys</span> <span class="o">=</span> <span class="n">stacked</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">categories</span><span class="p">)</span>

<span class="c"># The x coordinates for each polygon are simply the series concatenated</span>
<span class="c"># with its reverse.</span>
<span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">categories</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">categories</span><span class="p">))]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>

<span class="c"># Pick out a color palette</span>
<span class="n">colors</span> <span class="o">=</span> <span class="n">brewer</span><span class="p">[</span><span class="s">&quot;Spectral&quot;</span><span class="p">][</span><span class="nb">len</span><span class="p">(</span><span class="n">ys</span><span class="p">)]</span>

<span class="hll"><span class="c"># EXERCISE: output static HTML file</span>
</span>
<span class="hll"><span class="c"># EXERCISE: play around with parameters like:</span>
</span><span class="c">#   - line_color</span>
<span class="c">#   - line_alpha</span>
<span class="c">#   - line_width</span>
<span class="c">#   - line_dash   (e.g., [2,4])</span>
<span class="c">#   - fill_color</span>
<span class="c">#   - fill_alpha</span>
<span class="c">#   - background_fill</span>
<span class="n">patches</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="n">categories</span><span class="p">,</span> <span class="n">y_range</span><span class="o">=</span><span class="n">Range1d</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">800</span><span class="p">),</span>
        <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">background_fill</span><span class="o">=</span><span class="s">&quot;lightgrey&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s">&quot;Categories of Brewering&quot;</span><span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE: configure all of the following plot properties</span>
</span><span class="n">ygrid</span><span class="p">()</span><span class="o">.</span><span class="n">grid_line_color</span> <span class="o">=</span>            <span class="c"># color, or None, to suppress the line</span>
<span class="n">ygrid</span><span class="p">()</span><span class="o">.</span><span class="n">grid_line_width</span> <span class="o">=</span>            <span class="c"># line width for grid lines</span>
<span class="n">axis</span><span class="p">()</span><span class="o">.</span><span class="n">major_label_text_font_size</span> <span class="o">=</span>  <span class="c"># &quot;12pt&quot;, &quot;1.5em&quot;, &quot;10px&quot;, etc</span>
<span class="n">axis</span><span class="p">()</span><span class="o">.</span><span class="n">major_label_text_font_style</span> <span class="o">=</span> <span class="c"># &quot;bold&quot;, &quot;normal&quot;, &quot;italic&quot;</span>
<span class="n">axis</span><span class="p">()</span><span class="o">.</span><span class="n">major_label_standoff</span> <span class="o">=</span>        <span class="c"># distance of tick labels from ticks</span>
<span class="n">axis</span><span class="p">()</span><span class="o">.</span><span class="n">axis_line_color</span> <span class="o">=</span>             <span class="c"># color, or None, to suppress the line</span>
<span class="n">xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">major_label_orientation</span> <span class="o">=</span>    <span class="c"># radians, &quot;horizontal&quot;, &quot;vertical&quot;, &quot;normal&quot;</span>
<span class="n">xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">major_tick_in</span> <span class="o">=</span>              <span class="c"># distance ticks extends into the plot</span>
<span class="n">xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">major_tick_out</span> <span class="o">=</span>             <span class="c"># and distance they extend out</span>
<span class="n">xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">major_tick_line_color</span> <span class="o">=</span>      <span class="c"># color, or None, to suppress the line</span>

<span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
<p>See the <a class="reference internal" href="style_soln.html"><em>solution</em></a>.</p>
</div>
<div class="section" id="hovering-above-the-data">
<span id="hover"></span><h2><a class="toc-backref" href="#id5">Hovering above the Data</a><a class="headerlink" href="#hovering-above-the-data" title="Permalink to this headline">Â¶</a></h2>
<ul class="simple">
<li>exercise location: <strong>scripts/hover.py</strong></li>
</ul>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">six.moves</span> <span class="kn">import</span> <span class="nb">zip</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">bokeh.objects</span> <span class="kn">import</span> <span class="n">HoverTool</span><span class="p">,</span> <span class="n">Range1d</span>

<span class="c"># Create a set of tools to use</span>
<span class="n">TOOLS</span><span class="o">=</span><span class="s">&quot;pan,wheel_zoom,box_zoom,reset,hover&quot;</span>

<span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">xx</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">yy</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">inds</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
<span class="n">radii</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">)</span><span class="o">*</span><span class="mf">0.4</span> <span class="o">+</span> <span class="mf">1.7</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&quot;#</span><span class="si">%02x%02x%02x</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mi">50</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="mi">30</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="p">))</span>
<span class="p">]</span>

<span class="hll"><span class="c"># EXERCISE: create two new data fields for the hover tool to interrogate. They can</span>
</span><span class="hll"><span class="c"># be anything you like, but it needs to have the same length as x, y, etc.</span>
</span><span class="n">foo</span> <span class="o">=</span>
<span class="n">bar</span> <span class="o">=</span>

<span class="c"># We need to put these data into a ColumnDataSource</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span>
        <span class="n">radius</span><span class="o">=</span><span class="n">radii</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">foo</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span>
        <span class="n">bar</span><span class="o">=</span><span class="n">bar</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE: output static HTML file</span>
</span>
<span class="n">hold</span><span class="p">()</span>

<span class="c"># This is identical to the scatter exercise, but adds the &#39;source&#39; parameter</span>
<span class="n">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radii</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="n">TOOLS</span><span class="p">,</span>
       <span class="n">fill_color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span>
       <span class="n">line_color</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">Title</span><span class="o">=</span><span class="s">&quot;Hoverful Scatter&quot;</span><span class="p">)</span>

<span class="hll"><span class="c"># EXERCISE (optional) add a `text` renderer to display the index of each circle</span>
</span><span class="hll"><span class="c"># inside the circle</span>
</span>
<span class="hll"><span class="c"># EXERCISE: try other &quot;marker-like&quot; renderers besides `circle`</span>
</span>
<span class="c"># We want to add some fields for the hover tool to interrogate, but first we</span>
<span class="c"># have to get ahold of the tool. This will be made easier in future releases.</span>
<span class="n">hover</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">curplot</span><span class="p">()</span><span class="o">.</span><span class="n">tools</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">HoverTool</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span>

<span class="hll"><span class="c"># EXERCISE: add some new tooltip (name, value) pairs. Variables from the</span>
</span><span class="hll"><span class="c"># data source are available with a &quot;@&quot; prefix, e.g., &quot;@x&quot; will display the</span>
</span><span class="hll"><span class="c"># x value under the cursor. There are also some special known values that</span>
</span><span class="hll"><span class="c"># start with &quot;$&quot; symbol:</span>
</span><span class="hll"><span class="c">#   - $index     index of selected point in the data source</span>
</span><span class="hll"><span class="c">#   - $x, $y     &quot;data&quot; coordinates under cursor</span>
</span><span class="hll"><span class="c">#   - $sx, $sy   canvas coordinates under cursor</span>
</span><span class="hll"><span class="c">#   - $color     color data from data source, syntax: $color[options]:field_name</span>
</span><span class="hll"><span class="c"># NOTE: we use an OrderedDict to preserve the order in the displayed tooltip</span>
</span><span class="n">hover</span><span class="o">.</span><span class="n">tooltips</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="c"># add to this</span>
    <span class="p">(</span><span class="s">&quot;(x,y)&quot;</span><span class="p">,</span> <span class="s">&quot;($x, $y)&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&quot;fill color&quot;</span><span class="p">,</span> <span class="s">&quot;$color[hex, swatch]:colors&quot;</span><span class="p">),</span>
<span class="p">])</span>

<span class="n">show</span><span class="p">()</span>  <span class="c"># open a browser</span>
</pre></div>
</td></tr></table></div>
<p>See the <a class="reference internal" href="hover_soln.html"><em>solution</em></a>.</p>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/basic.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2013, Continuum Anaytics.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.1.<br/>
    </p>
  </div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-7', 'pydata.org');
  ga('send', 'pageview');

</script>



  </body>
</html>